<!DOCTYPE html>
<html lang="zh-CN">
  <head>
    
<meta charset="UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=edge" />
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1"/>


<meta http-equiv="Cache-Control" content="no-transform" />
<meta http-equiv="Cache-Control" content="no-siteapp" />



  <meta name="description" content="JavaScript设计模式读书笔记----字面量和构造函数,函数"/>




  <meta name="keywords" content="设计模式," />




  <link rel="alternate" href="/default" title="Beginning">




  <link rel="shortcut icon" type="image/x-icon" href="/favicon.ico?v=2.4.x" />



<link rel="canonical" href="http://yoursite.com/2016/04/16/JavaScript-model-sumary-function/"/>


<meta name="description" content="当以 new 操作符调用构造函数时， 函数内部将会发生以下变化：  创建一个空对象并且 this 变量引用了该对象，同时还继承了该函数的原型；属性和方法被加入到 this 引用的对象中；新创建的对象由 this 引用，并且最后隐式的返回 this ；  1234567891011121314var Person = function (name) &amp;#123;  //使用对象字面量模式创建一个新">
<meta name="keywords" content="设计模式">
<meta property="og:type" content="article">
<meta property="og:title" content="JavaScript设计模式读书笔记----字面量和构造函数,函数">
<meta property="og:url" content="http://yoursite.com/2016/04/16/JavaScript-model-sumary-function/index.html">
<meta property="og:site_name" content="Beginning">
<meta property="og:description" content="当以 new 操作符调用构造函数时， 函数内部将会发生以下变化：  创建一个空对象并且 this 变量引用了该对象，同时还继承了该函数的原型；属性和方法被加入到 this 引用的对象中；新创建的对象由 this 引用，并且最后隐式的返回 this ；  1234567891011121314var Person = function (name) &amp;#123;  //使用对象字面量模式创建一个新">
<meta property="og:locale" content="zh-CN">
<meta property="og:updated_time" content="2017-07-26T06:48:03.000Z">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="JavaScript设计模式读书笔记----字面量和构造函数,函数">
<meta name="twitter:description" content="当以 new 操作符调用构造函数时， 函数内部将会发生以下变化：  创建一个空对象并且 this 变量引用了该对象，同时还继承了该函数的原型；属性和方法被加入到 this 引用的对象中；新创建的对象由 this 引用，并且最后隐式的返回 this ；  1234567891011121314var Person = function (name) &amp;#123;  //使用对象字面量模式创建一个新">


<link rel="stylesheet" type="text/css" href="/css/style.css?v=2.4.x" />







<script>
  var CONFIG = {
    search: false,
    searchPath: "/search.xml",
    fancybox: false,
    toc: true,
  }
</script>




  



    <title> JavaScript设计模式读书笔记----字面量和构造函数,函数 · Beginning </title>
  </head>

  <body><div id="mobile-navbar" class="mobile-navbar">
  <div class="mobile-header-logo">
    <a href="/." class="logo">Beginning</a>
  </div>
  <div class="mobile-navbar-icon">
    <span></span>
    <span></span>
    <span></span>
  </div>
</div>

<nav id="mobile-menu" class="mobile-menu slideout-menu">
  <ul class="mobile-menu-list">
    
      <a href="/">
        <li class="mobile-menu-item">
          
          
            Home
          
        </li>
      </a>
    
      <a href="/archives/">
        <li class="mobile-menu-item">
          
          
            Archives
          
        </li>
      </a>
    
  </ul>
</nav>

    <div class="container" id="mobile-panel">
      <header id="header" class="header"><div class="logo-wrapper">
  <a href="/." class="logo">Beginning</a>
</div>

<nav class="site-navbar">
  
    <ul id="menu" class="menu">
      
        <li class="menu-item">
          <a class="menu-item-link" href="/">
            
            
              Home
            
          </a>
        </li>
      
        <li class="menu-item">
          <a class="menu-item-link" href="/archives/">
            
            
              Archives
            
          </a>
        </li>
      
      
    </ul>
  
</nav>

      </header>

      <main id="main" class="main">
        <div class="content-wrapper">
          <div id="content" class="content">
            
  
  <article class="post">
    <header class="post-header">
      <h1 class="post-title">
        
          JavaScript设计模式读书笔记----字面量和构造函数,函数
        
      </h1>

      <div class="post-meta">
        <span class="post-time">
          2016年4月16日
        </span>
      </div>
    </header>

    
    

    <div class="post-content">
      
        <ol>
<li><p>当以 new 操作符调用构造函数时， 函数内部将会发生以下变化：</p>
<blockquote>
<p>创建一个空对象并且 this 变量引用了该对象，同时还继承了该函数的原型；<br>属性和方法被加入到 this 引用的对象中；<br>新创建的对象由 this 引用，并且最后隐式的返回 this ；</p>
</blockquote>
<figure class="highlight actionscript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">var</span> Person = <span class="function"><span class="keyword">function</span> <span class="params">(name)</span> </span>&#123;</div><div class="line">  <span class="comment">//使用对象字面量模式创建一个新对象</span></div><div class="line">  <span class="keyword">var</span> <span class="keyword">this</span> = &#123;&#125; ;</div><div class="line">  <span class="comment">//向this添加属性和方法</span></div><div class="line">  <span class="keyword">this</span>.name = name;</div><div class="line">  <span class="keyword">this</span>.say = <span class="function"><span class="keyword">function</span> <span class="params">()</span> </span>&#123;</div><div class="line">    <span class="keyword">return</span> <span class="string">"I'm"</span> + <span class="keyword">this</span>.name;</div><div class="line">  &#125;  </div><div class="line"><span class="comment">//return this;</span></div><div class="line">&#125;;</div><div class="line"><span class="comment">//一般情况下，将一个方法添加到Person的原型</span></div><div class="line">Person.prototype.say = <span class="function"><span class="keyword">function</span> <span class="params">()</span> </span>&#123;</div><div class="line">  <span class="keyword">return</span> <span class="string">"I'm"</span> + <span class="keyword">this</span>.name;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
</li>
<li><p>当使用new操作符创建对象时，构造函数总是返回一个对象。默认返回this所引用的对象，将返回空； </p>
</li>
<li><p>检测数组的方法 :</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">if</span> ( <span class="keyword">typeof</span> <span class="built_in">Array</span>.isArray === <span class="string">"undefined"</span> ) &#123;</div><div class="line">  <span class="built_in">Array</span>.isArray = <span class="function"><span class="keyword">function</span> (<span class="params">arg</span>) </span>&#123;</div><div class="line">  <span class="comment">//调用Object.prototype.toString()的call()方法， 如果是数组返回[object Array]，对象返回[Object Object]</span></div><div class="line">    retrun <span class="built_in">Object</span>.prototype.toString.call(arg) === <span class="string">"[object Array]"</span>;</div><div class="line">    &#125;;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
</li>
<li><p>函数的提升</p>
<figure class="highlight php"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div></pre></td><td class="code"><pre><div class="line"><span class="function"><span class="keyword">function</span> <span class="title">foo</span> <span class="params">()</span> </span>&#123;</div><div class="line">  alert(<span class="string">"global foo"</span>);</div><div class="line">&#125;</div><div class="line"><span class="function"><span class="keyword">function</span> <span class="title">bar</span> <span class="params">()</span> </span>&#123;</div><div class="line">  alert(<span class="string">"global bar"</span>);</div><div class="line">&#125;</div><div class="line"><span class="function"><span class="keyword">function</span> <span class="title">hoistMe</span><span class="params">()</span> </span></div><div class="line">  <span class="title">console</span>.<span class="title">log</span><span class="params">(typeof foo)</span>; <span class="comment">// "function"</span></div><div class="line">  console.log(typeof bar); <span class="comment">//"undefined"</span></div><div class="line"></div><div class="line">  foo(); <span class="comment">// "global foo"</span></div><div class="line">  bar(); <span class="comment">// TypeError: bar is not a function</span></div><div class="line">  <span class="comment">//函数声明，变量"foo"及其实现者被提升</span></div><div class="line">  <span class="function"><span class="keyword">function</span> <span class="title">foo</span> <span class="params">()</span>  </span>&#123;</div><div class="line">    alert(<span class="string">"local foo"</span>);</div><div class="line">  &#125;</div><div class="line">  <span class="comment">//函数表达式，仅变量"bar"被提升，函数实现并未被提升</span></div><div class="line">  <span class="keyword">var</span> bar = <span class="function"><span class="keyword">function</span> <span class="params">()</span> </span>&#123;</div><div class="line">    alert(<span class="string">"local bar"</span>);</div><div class="line">  &#125;;</div><div class="line">&#125;</div><div class="line">hoistMe();</div></pre></td></tr></table></figure>
</li>
<li><p>异步事件监听器</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line"><span class="built_in">document</span>.addEventListener(<span class="string">"click"</span>,<span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;alert(<span class="string">"hello~"</span>)&#125;,<span class="literal">false</span>);</div></pre></td></tr></table></figure>
</li>
<li><p>即时函数<br>即时函数模式(Immediate Function pattern)是一种可以支持在定义函数后立即执行该函数的语法。</p>
<figure class="highlight actionscript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line">(<span class="function"><span class="keyword">function</span> <span class="params">()</span> </span>&#123;</div><div class="line">     alert(<span class="string">"looooooook!"</span>);</div><div class="line">&#125;());</div><div class="line"><span class="comment">//在函数末尾添加一组括号，这导致该函数立刻执行</span></div><div class="line"><span class="comment">//将所有代码包装到它的局部作用域中，切不会将任何变量泄露到全局作用域之中</span></div></pre></td></tr></table></figure>
</li>
<li><p>即时函数的返回值<br>可以利用即时函数包装一个在对象生存期内不会改变的属性，并且即时函数的返回值会成为属性值。</p>
<figure class="highlight actionscript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">var</span>  o = &#123;</div><div class="line">  message: (<span class="function"><span class="keyword">function</span><span class="params">()</span></span>&#123;</div><div class="line">     <span class="keyword">var</span> who = <span class="string">"me"</span>,</div><div class="line">         what = <span class="string">"call"</span>;</div><div class="line">    <span class="keyword">return</span> what+<span class="string">" "</span>+who;</div><div class="line">&#125;()),</div><div class="line">getMsg: <span class="function"><span class="keyword">function</span> <span class="params">()</span> </span>&#123;</div><div class="line">  <span class="keyword">return</span> <span class="keyword">this</span>.message;</div><div class="line">    &#125;</div><div class="line">&#125;;</div><div class="line">o.getMsg(); <span class="comment">//输出"call me"</span></div><div class="line">o.message; <span class="comment">//输出"call me"</span></div></pre></td></tr></table></figure>
</li>
<li><p>即时函数的初始化</p>
<figure class="highlight nimrod"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line">(<span class="meta">&#123;...&#125;</span>).init();</div><div class="line">(<span class="meta">&#123;...&#125;</span>.init());</div><div class="line">//如果要在init()结束后保存对该对象的一个引用，可以通过在init()后面添加<span class="string">"return this"</span>实现该功能;</div></pre></td></tr></table></figure>
</li>
<li><p>备忘模式<br>函数 myFunc 创建了一个属性cache，cache属性是一个对象(哈希对象)，使用传递给函数的param作为键，结果为值。</p>
<figure class="highlight actionscript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">var</span> myFunc = <span class="function"><span class="keyword">function</span> <span class="params">()</span> </span>&#123;</div><div class="line">    <span class="keyword">if</span> ( !myFunc.cache[param] ) &#123;</div><div class="line">      <span class="comment">//一些操作</span></div><div class="line">      <span class="keyword">var</span> result = &#123;&#125;;</div><div class="line">      myFunc.cache[param] = result; </div><div class="line">     &#125;</div><div class="line">    <span class="keyword">return</span> myFunc.cache[param];</div><div class="line">&#125;</div></pre></td></tr></table></figure>
</li>
<li><p>配置对象</p>
<figure class="highlight scilab"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div></pre></td><td class="code"><pre><div class="line"><span class="comment">//before</span></div><div class="line"><span class="function"><span class="keyword">function</span> <span class="title">addPerson</span> <span class="params">(name,age,birth,address,gender,first,last)</span>&#123;......&#125;; </span></div><div class="line">addPerson(<span class="string">"begin"</span>,<span class="string">"16"</span>,<span class="string">'123"</span>,<span class="string">"女"</span>,<span class="string">"b"</span>,<span class="string">"g"</span>);</div><div class="line"><span class="comment">//after</span></div><div class="line">var conf = &#123;</div><div class="line">      name:<span class="string">"begin"</span>,</div><div class="line">      first:<span class="string">"b"</span>,</div><div class="line">      last::<span class="string">"g"</span>,</div><div class="line">      gender:<span class="string">"女"</span></div><div class="line">&#125;；</div><div class="line">addPerson(conf);</div></pre></td></tr></table></figure>
</li>
</ol>
<p>优点：不需要记住众多的参数及其顺序，可以安全忽略可选参数，易于阅读和维护，易于添加和删除参数。</p>
<ol>
<li><p>call()和apply()的区别<br><a href="http://www.jianshu.com/p/3a823ef9db97" target="_blank" rel="external">http://www.jianshu.com/p/3a823ef9db97</a></p>
</li>
<li><p>Curry化 //需要深入了解<br>当新函数是基于现有函数，并加上部分参数列表创建时。</p>
</li>
</ol>
<p>总结：</p>
<ol>
<li>API 模式：<ul>
<li>回调模式：将函数作为参数进行传递</li>
<li>配置对象：便于控制函数的参数数量</li>
<li>返回函数：当一个函数的返回值是另一个函数时</li>
<li>Curry化：当新函数是基于现有函数，并加上部分参数列表创建时</li>
</ul>
</li>
<li>初始化模式<ul>
<li>即时函数 ：定义后立即的函数</li>
<li>即时对象初始化：匿名对象组织了初始化任务，提供了可以被立即调用的方法</li>
<li>初始化时分支：帮助分支代码在初始化时仅检测一次</li>
</ul>
</li>
<li>性能模式<ul>
<li>备忘模式：使用函数属性以便计算过的值无需再次计算</li>
<li>自定义模式：以新的主体重写本身，使得后续调用时进行的工作更少 </li>
</ul>
</li>
</ol>

      
    </div>

    
      
      



      
      
    

    
      <footer class="post-footer">
        
          <div class="post-tags">
            
              <a href="/tags/设计模式/">设计模式</a>
            
          </div>
        
        
        
  <nav class="post-nav">
    
      <a class="prev" href="/2016/04/17/ali-front-end-test/">
        <i class="iconfont icon-left"></i>
        <span class="prev-text nav-default">2016阿里前端实习生笔试</span>
        <span class="prev-text nav-mobile">Prev</span>
      </a>
    
    
      <a class="next" href="/2016/04/14/JavaScript-model-sumary-basic/">
        <span class="next-text nav-default">JavaScript设计模式读书笔记----基本技巧</span>
        <span class="prev-text nav-mobile">Next</span>
        <i class="iconfont icon-right"></i>
      </a>
    
  </nav>

      </footer>
    

  </article>


          </div>
          
  <div class="comments" id="comments">
    
  </div>


        </div>  
      </main>

      <footer id="footer" class="footer">

  <div class="social-links">
    
      
        
          <a href="mailto:your@email.com" class="iconfont icon-email" title="email"></a>
        
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
    
    
      
      <a href="/atom.xml" class="iconfont icon-rss" title="rss"></a>
    
  </div>


<div class="copyright">
  <span class="power-by">
    Powered by <a class="hexo-link" href="https://hexo.io/">Hexo</a>
  </span>
  
  <span class="theme-info">
    Theme - 
    <a class="theme-link" href="https://github.com/ahonn/hexo-theme-even">Even</a>
  </span>

  <span class="copyright-year">
    
    &copy; 
     
      2015 - 
    
    2017

    <span class="heart">
      <i class="iconfont icon-heart"></i>
    </span>
    <span class="author">Begin5257</span>
  </span>
</div>
      </footer>

      <div class="back-to-top" id="back-to-top">
        <i class="iconfont icon-up"></i>
      </div>
    </div>

    
  



    




  
    <script type="text/javascript" src="/lib/jquery/jquery-3.1.1.min.js"></script>
  

  
    <script type="text/javascript" src="/lib/slideout/slideout.js"></script>
  

  


    <script type="text/javascript" src="/js/src/even.js?v=2.4.x"></script>
<script type="text/javascript" src="/js/src/bootstrap.js?v=2.4.x"></script>

    
  </body>
</html>
